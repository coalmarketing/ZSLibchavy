<!-- TOP BAR + HEADER -->
<div class="fixed flex flex-col gap-4 group-[.scroll]/body:h-20 w-full z-50">
  <!-- TOP BAR -->
  <div class="relative ~px-4/8 bg-gray-900 transition-transform duration-300 group-[.scroll]/body:-translate-y-full">
    <div class="container m-auto flex justify-between">
      <!-- MISC LINKS -->
      <ul class="flex [&>li:nth-child(1)>a]:bg-gray-700 [&>li:nth-child(2)>a]:bg-gray-800">
        {% for item in header.topBar.miscLinks %}
          <li>
            <a href="{{ item.url }}" target="{{ item.target }}" class="group flex items-center gap-2 py-3 px-4">
              <img
                src="{{ item.icon.url }}"
                alt="{{ item.icon.alt }}"
                width="18"
                height="18"
                loading="lazy"
                decoding="async"
                aria-hidden="true"
                draggable="false">

              <span class="text-sm text-gray-200 font-medium leading-6 group-hover:text-white">{{ item.text }}</span>
            </a>
          </li>
        {% endfor %}
      </ul>

      <!-- CONTACTS -->
      <ul class="flex items-center gap-2 lg:gap-4">
        {% for item in header.topBar.contacts %}
          <li>
            <a href="{{ item.url }}" target="{{ item.target }}" class="group flex items-center gap-2">
              <img
                src="{{ item.icon.url }}"
                alt="{{ item.icon.alt }}"
                width="18"
                height="18"
                loading="lazy"
                decoding="async"
                aria-hidden="true"
                draggable="false">

              <span class="max-lg:hidden text-sm text-gray-200 font-medium group-hover:text-white">{{ item.text }}</span>
            </a>
          </li>

          {% if not loop.last %}
            <li class="max-lg:hidden h-5 w-px bg-gray-200/50"></li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>

  <!-- HEADER -->
  <header class="container m-auto flex h-20 pl-8 pr-4 bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-600 shadow-md rounded-3xl transition-[max-width,_transform,_border-width,_border-radius] duration-300 group-[.scroll]/body:max-w-full group-[.scroll]/body:-translate-y-16 group-[.scroll]/body:border-0 group-[.scroll]/body:border-b-2 group-[.scroll]/body:rounded-none">
    <div class="container m-auto flex justify-between items-center">
      <!-- LOGO -->
      <div class="xl:basis-1/3 flex">
        <a href="/" class="flex items-center gap-4">
          <img
            src="/assets/svgs/zsmslibchavy_logo.svg"
            alt="Logo - {{ client.name }}"
            width="74"
            height="49"
            loading="lazy"
            decoding="async"
            aria-hidden="true"
            draggable="false">

          <span class="text-lg text-black dark:text-white font-medium leading-6">Základní a mateřská<br>škola Libchavy</span>
        </a>
      </div>

      <!-- NAVIGATION -->
      <nav class="max-xl:hidden xl:basis-1/3 h-20">
        <ul class="flex h-full mx-auto">
          {% set navPages = collections.all | eleventyNavigation %}

          {# Loop through all pages with a eleventyNavigation in the frontmatter #}
          {% for entry in navPages %}
            <li>
              <a href="{{ entry.url }}"
                class="border-category flex items-center h-[calc(100%-2px)] group-[.scroll]/body:h-full py-2 px-4 border-b-2 text-center text-sm font-medium text-gray-800 dark:text-gray-200 whitespace-nowrap hover:text-gray-950 dark:hover:text-white transition-[height] duration-300"
                data-category="{{ entry.data.category }}"
                {%- if entry.url === page.url -%}aria-current="page"{%- endif -%}>
                {{ entry.key }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </nav>

      <!-- DARKMODE + CTA -->
      <div class="xl:basis-1/3 flex justify-end items-center gap-2">
        <!-- DARKMODE SWITCH -->
        <label class="darkmode-container relative h-8 w-8 hover:cursor-pointer" for="dark-mode-toggle">
          <span class="sr-only">Přepínač tmavého režimu</span>
          <input id="dark-mode-toggle" type="checkbox">

          <!-- LIGHTMODE -->
          <img
            class="absolute top-1/2 left-1/2 -translate-y-1/2 transition-[transform,_opacity] duration-300 -translate-x-1/2 opacity-100 dark:-translate-y-6 dark:opacity-0"
            src="/assets/svgs/header/light_mode.svg"
            alt="Ikona měsíce"
            width="20"
            height="20"
            loading="eager"
            decoding="async"
            aria-hidden="true"
            draggable="false">

          <!-- LIGHTMODE -->
          <img
            class="absolute top-1/2 left-1/2 translate-y-6 -translate-x-1/2 transition-[transform,_opacity,_color] duration-300
            opacity-0 dark:-translate-y-1/2 dark:opacity-100"
            src="/assets/svgs/header/dark_mode.svg"
            alt="Ikona měsíce"
            width="20"
            height="20"
            loading="eager"
            decoding="async"
            aria-hidden="true"
            draggable="false">
        </label>

        <!-- CTA -->
        <a href="https://zslibchavy.bakalari.cz/bakaweb/" target="_blank" class="btn">
          <span>Bakaláři</span>

          <div>
            <img
            src="/assets/svgs/arrow_outward_dark.svg"
            alt="Ikona šipky směřující nahoru"
            width="20"
            height="20"
            loading="lazy"
            decoding="async"
            aria-hidden="true"
            draggable="false">
          </div>
        </a>

        <!-- MOBILE MENU BUTTON -->
        <button
          id="mobile-menu-toggle"
          class="group lg:hidden flex justify-center items-center gap-1 h-11 w-11 bg-secondary rounded-xl transition-transform duration-300 [&.active]:rotate-90"
          type="button"
          aria-expanded="false"
        >
          <span class="sr-only">Otevřít navigaci</span>
          <span class="relative block h-3.5 w-5">
            <span class="absolute top-0 block h-0.5 w-full bg-gray-950 dark:bg-white rounded-full transition-transform duration-300 group-[.active]:rotate-45 group-[.active]:top-1/2 group-[.active]:-translate-y-1/2 group-[.active]:left-1/2 group-[.active]:-translate-x-1/2"></span>
            <span class="absolute top-1/2 -translate-y-1/2 block h-0.5 w-full bg-gray-950 dark:bg-white rounded-full transition-[opacity] duration-300 group-[.active]:opacity-0"></span>
            <span class="absolute bottom-0 block h-0.5 w-full bg-gray-950 dark:bg-white rounded-full transition-transform duration-300 group-[.active]:rotate-[315deg] group-[.active]:top-1/2 group-[.active]:-translate-y-1/2 group-[.active]:left-1/2 group-[.active]:-translate-x-1/2"></span>
          </span>
        </button>
      </div>
    </div>
  </header>
</div>